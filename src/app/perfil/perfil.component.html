<div class="perfil-dashboard">

  <!-- HEADER CON COLORES DE FOCOSHOP -->
  <div class="perfil-header-dashboard">
    <button class="volver-btn" (click)="volverInicio()">
      <i class="fas fa-arrow-left"></i> Volver
    </button>

    <div class="perfil-info">
      <img [src]="user.imagen" alt="Foto perfil" class="perfil-foto-dashboard"/>
      <div class="perfil-texto">
        <h2>{{ user.nombre }}</h2>
        <p>{{ user.email }}</p>
        <button class="editar-btn" (click)="editarPerfil()">
          <i class="fas fa-edit"></i> Editar perfil
        </button>
      </div>
    </div>
  </div>

  <!-- TÍTULO DE SECCIÓN -->
  <div class="seccion-titulo">
    <h2>
      <i class="fas fa-shopping-bag"></i>
      Mis Compras
    </h2>
    <p>Historial de tus pedidos realizados</p>
  </div>

  <!-- PRODUCTOS / SECCIÓN BLANCA -->
  <div class="productos-seccion">
    @if (cargando) {
      <div class="loading-productos">
        <i class="fas fa-spinner fa-spin fa-3x"></i>
        <p>Cargando compras...</p>
      </div>
    } @else {
      <div class="productos-scroll">
        @for (producto of compras; track producto.id) {
          <div class="producto-card" (click)="verDetalleProducto(producto)">
            <img [src]="producto.imagen" alt="{{ producto.nombre }}" />
            <div class="producto-detalles">
              <h4>{{ producto.nombre }}</h4>
              <p class="precio">${{ producto.precio | number:'1.0-0' }}</p>
              @if (producto.fecha_venta) {
                <p class="fecha-venta">
                  <i class="fas fa-calendar"></i>
                  {{ producto.fecha_venta | date:'dd/MM/yyyy' }}
                </p>
              }
              @if (producto.estado) {
                <span class="estado-badge" [class]="'estado-' + producto.estado">
                  {{ producto.estado }}
                </span>
              }
              @if (producto.vendedor) {
                <p class="vendedor-info">
                  <i class="fas fa-store"></i>
                  {{ producto.vendedor }}
                </p>
              }
            </div>
          </div>
        } @empty {
          <div class="vacio">
            <i class="fas fa-shopping-cart fa-3x"></i>
            <p>No has realizado ninguna compra</p>
            <button class="btn-explorar" (click)="explorarProductos()">
              <i class="fas fa-search"></i> Explorar productos
            </button>
          </div>
        }
      </div>
    }
  </div>

</div>