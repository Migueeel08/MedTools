<div class="perfil-dashboard">

  <!-- HEADER NEGRO RECTANGULAR -->
  <div class="perfil-header-dashboard">
    <button class="volver-btn" (click)="volverInicio()">
      <i class="fas fa-arrow-left"></i> Volver
    </button>

    <div class="perfil-info">
      <div class="perfil-icono">
        <i class="fas fa-user-circle fa-6x"></i>
      </div>
      <div class="perfil-texto">
        <h2>{{ user.nombre }}</h2>
        <p>{{ user.email }}</p>
        <button class="editar-btn" (click)="editarPerfil()">
          <i class="fas fa-edit"></i> Editar perfil
        </button>
      </div>
    </div>
  </div>

  <!-- TABS (solo compras) -->
  <div class="tabs-perfil">
    <button 
      [class.active]="tabSeleccionado==='compras'" 
      (click)="seleccionarTab('compras')">
      <i class="fas fa-shopping-bag"></i> Compras
      @if (compras.length > 0) {
        <span class="badge">{{ compras.length }}</span>
      }
    </button>
  </div>

  <!-- PRODUCTOS / SECCIÃ“N BLANCA -->
  <div class="productos-seccion">
    @if (cargando) {
      <div class="loading-productos">
        <i class="fas fa-spinner fa-spin fa-3x"></i>
        <p>Cargando productos...</p>
      </div>
    } @else {
      <div class="productos-scroll">
        @for (producto of obtenerProductosActivos(); track producto.id) {
          <div class="producto-card" (click)="verDetalleProducto(producto)">
            <img [src]="producto.imagen" alt="{{ producto.nombre }}" />
            <div class="producto-detalles">
              <h4>{{ producto.nombre }}</h4>
              <p class="precio">${{ producto.precio | number:'1.0-0' }}</p>
              @if (tabSeleccionado === 'compras' && producto.fecha_venta) {
                <p class="fecha-venta">
                  <i class="fas fa-calendar"></i>
                  {{ producto.fecha_venta | date:'dd/MM/yyyy' }}
                </p>
              }
            </div>
          </div>
        } @empty {
          <div class="vacio">
            <i class="fas fa-shopping-cart fa-3x"></i>
            <p>No has realizado ninguna compra</p>
            <button class="btn-vender" (click)="explorarProductos()">
              <i class="fas fa-search"></i> Explorar productos
            </button>
          </div>
        }
      </div>
    }
  </div>

</div>
