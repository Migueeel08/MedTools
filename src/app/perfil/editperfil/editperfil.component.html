<div class="perfil-container">
  <!-- HEADER CON GRADIENTE DE FOCOSHOP -->
  <header class="header">
    <button class="btn-volver" (click)="volver()">
      <i class="fa fa-arrow-left"></i> Volver
    </button>
    
    <div class="logo">
      <i class="fa fa-heartbeat"></i>
      <span class="logo-text">MEDTOOLS</span>
    </div>
    
    <div class="header-spacer"></div>
  </header>

  <div class="perfil-card">
    <div class="card-header">
      <i class="fa fa-user-edit"></i>
      <h2>Editar Perfil</h2>
    </div>

    <!-- SECCIÃ“N FOTO -->
    <div class="foto-section">
      <div class="foto-wrapper">
        <img [src]="user.imagen" alt="Foto de perfil" class="foto-perfil" />
        <div class="foto-overlay">
          <i class="fa fa-camera"></i>
        </div>
      </div>
      <input type="file" id="fotoInput" (change)="onFileSelected($event)" hidden />
      <button class="btn-foto" type="button" (click)="abrirSelectorFoto()">
        <i class="fa fa-camera"></i>
        Cambiar foto
      </button>
    </div>

    <!-- FORMULARIO PERFIL -->
    <form (ngSubmit)="guardarCambios()" class="perfil-form">
      
      <!-- Nombre -->
      <div class="input-group">
        <label>
          <i class="fa fa-user"></i>
          Nombre
        </label>
        <input 
          type="text" 
          [(ngModel)]="user.nombre" 
          name="nombre" 
          placeholder="Ingresa tu nombre"
          required />
      </div>

      <!-- Apellido -->
      <div class="input-group">
        <label>
          <i class="fa fa-user"></i>
          Apellido
        </label>
        <input 
          type="text" 
          [(ngModel)]="user.apellido" 
          name="apellido" 
          placeholder="Ingresa tu apellido"
          required />
      </div>

      <!-- Correo -->
      <div class="input-group">
        <label>
          <i class="fa fa-envelope"></i>
          Correo electrÃ³nico
        </label>
        <input 
          type="email" 
          [(ngModel)]="user.email" 
          name="email" 
          disabled 
          class="input-disabled" />
        <small class="input-help">El correo no puede ser modificado</small>
      </div>

      <!-- TelÃ©fono con lada -->
      <div class="input-group">
        <label>
          <i class="fa fa-phone"></i>
          NÃºmero de telÃ©fono
        </label>
        <div class="telefono-container">
          <select [(ngModel)]="user.lada" name="lada" class="lada-select">
            <option value="+52">ðŸ‡²ðŸ‡½ +52</option>
            <option value="+1">ðŸ‡ºðŸ‡¸ +1</option>
            <option value="+44">ðŸ‡¬ðŸ‡§ +44</option>
            <option value="+34">ðŸ‡ªðŸ‡¸ +34</option>
          </select>
          <input 
            type="text" 
            [(ngModel)]="user.telefono" 
            name="telefono" 
            placeholder="6681234567"
            class="telefono-input" />
        </div>
      </div>

      <button type="submit" class="btn-guardar">
        <i class="fa fa-save"></i>
        Guardar Cambios
      </button>
    </form>
  </div>
</div>

<!-- ALERTA ANIMADA CON FOCO -->
@if (mostrarAlerta) {
  <div class="alerta-overlay">
    <div class="alerta-container">
      <div class="foco-animado">
        <div class="foco-base"></div>
        <div class="foco-luz"></div>
        <div class="filamento"></div>
      </div>
      <p class="mensaje-exito">{{ mensajeAlerta }}</p>
    </div>
  </div>
}